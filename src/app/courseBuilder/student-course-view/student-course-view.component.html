<app-student-dashboard-header></app-student-dashboard-header>

<div class="container">
  <div class="col-md-12 course-top-heading">
    <div class="module-name">
      <div class="row border-bottom">
        <div class="col-lg-8 col-md-12">
          <h2>{{selectedCourse?.courseName}}</h2>
          <p>{{selectedCourse?.courseDescription}}</p>
        </div>
        <div class="col-lg-4 col-md-12">
          <div class="review-share-btns mt-sm-5 pb-2 justify-content-sm-end d-flex justify-content-center">
            <button type="button" class="btn-add-sales" (click)="ratingModal.show()">
              <div class="add-btn" style="padding: 0 3px;width: 132px;">
                <div class="addplus" style="float: left;">
                  <i class="fa fa-star"></i>
                </div>
                <div class="addtext">
                  Leave feedback
                </div>
              </div>
            </button>
            <!-- <a href="#">Share <i class="fa fa-share"></i></a> -->
          </div>
        </div>
      </div>

    </div>
  </div>
  <div class="d-flex content-wrapper">
    <div class="video-sidebar">
      <ul class="module-list">
        <li class="dropdown" mdbDropdown *ngFor="let item of receivedData"><a>{{item.moduleTitle | titlecase}}</a>
          <a mdbDropdownToggle mdbBtn class="dropdown-toggle btn custom-blank-btn waves-light" type="button"
            mdbWavesEffect>
          </a>
          <ul class="lessons dropdown-menu">
            <li *ngFor="let courseLesson of item?.lessonInfo"
              [ngClass]="{'disabled-lesson': courseLesson.daysDiffernce < courseLesson.scheduleTime}"
              (click)="onClickLesson(courseLesson, item?._id, item?.moduleTitle)">
              <a [ngClass]="{'disabled-lesson': courseLesson.daysDiffernce < courseLesson.scheduleTime}"><i
                  class="fa fa-play"></i> <span> {{courseLesson?.lessonTitle | titlecase}}</span> </a>
            </li>
          </ul>
        </li>
      </ul>

    </div>
    <div class="w-100">
      <div class="inner-content fill-bg">
        <div class="form-row">
          <div class="col-md-12 mb-2">
            <div class="row">
              <div class="col-lg-8 col-md-12">
                <div class="lesson-name pt-2 pb-2">{{selectedLesson?.lessonTitle | titlecase}} </div>
              </div>
              <div class="col-lg-4 col-md-12">
              </div>
            </div>
            <div class="video-lesson">
              <div plyr #plays style="width: 100%; height:480px" plyrTitle="Video 1" [plyrPlaysInline]="true"
                (plyrTimeUpdate)="timeupdate($event)" (plyrEnded)="onVideoEnded($event)"   [plyrOptions]="options" [plyrSources]="videoSources"
                (plyrInit)="$event"></div>
            </div>
            <br>
            <p style="color: black;" [innerHTML]="selectedLesson?.lessonInformation?.videoDetails?.videodescription">
            </p>
            <div class="quiz-assignment mt-3">
              <a *ngIf="selectedLesson?.lessonInformation?.quizId"
                (click)="isQuizOrAssignmentsOpen('quiz',selectedLesson?.lessonInformation)"><i
                  class="fa fa-puzzle-piece"></i> Quiz</a>
              <a *ngIf="selectedLesson?.lessonInformation?.AssignmentId"
                (click)="isQuizOrAssignmentsOpen('assignment',selectedLesson?.lessonInformation)"><i
                  class="far fa-file-alt"></i> Assignments</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-dashboardfooter></app-dashboardfooter>

<div mdbModal #ratingModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-star"></i> Leave Feedback</h4>
      </div>
      <div class="modal-body">
        <div class="profile-rating">
          <div class="avatar">
            <img class="card-img-top" src="{{studentProfile?.userImage}}" alt="Profile">
          </div>
          <div>{{studentProfile.firstName | titlecase}} {{studentProfile.lastName | titlecase}}</div>
        </div>
        <!-- Default form register -->
        <form>

          <div class="form-row mb-4">
            <div class="col">
              <label class="font400" style="display: block;">Rating</label>
              <div class="rate browser-default">
                <input type="radio" id="star5" name="rate" [(ngModel)]="userRating" value="5"
                  onkeydown="navRadioGroup(event)" onfocus="setFocus(event)" required="">
                <label for="star5" title="5 stars">5 stars</label>
                <input type="radio" id="star4" name="rate" [(ngModel)]="userRating" value="4"
                  onkeydown="navRadioGroup(event)">
                <label for="star4" title="4 stars">4 stars</label>
                <input type="radio" id="star3" name="rate" [(ngModel)]="userRating" value="3"
                  onkeydown="navRadioGroup(event)">
                <label for="star3" title="3 stars">3 stars</label>
                <input type="radio" id="star2" name="rate" [(ngModel)]="userRating" value="2"
                  onkeydown="navRadioGroup(event)">
                <label for="star2" title="2 stars">2 stars</label>
                <input type="radio" id="star1" name="https://codepen.io/pen/rate" [(ngModel)]="userRating" value="1"
                  onkeydown="navRadioGroup(event)" onfocus="setFocus(event)">
                <label for="star1" title="1 star">1 star</label>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="col-md-12">
              <div class="form-group">
                <label for="comment">Comment:</label>
                <textarea class="form-control" rows="4" [(ngModel)]="userComment" id="comment" name="text"></textarea>
              </div>
            </div>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" mdbBtn color="defualt" class="waves-light btn-md" aria-label="Close"
          (click)="ratingModal.hide()" mdbWavesEffect>Close</button>
        <button type="button" (click)="submitCoursesRating()" mdbBtn color="primary"
          class="accent-2 btn-md relative waves-light" mdbWavesEffect>Save</button>
      </div>
    </div>
  </div>
</div>
